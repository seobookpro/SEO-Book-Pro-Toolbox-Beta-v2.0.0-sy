<div class="space-y-6">
  <h1 class="text-3xl font-bold text-gray-900 dark:text-white">SEO Meta Tag Generator</h1>
  <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">

    <!-- Form & Preview Section -->
    <div class="space-y-6">
      <!-- Form -->
      <div class="p-6 bg-white dark:bg-gray-800 rounded-lg shadow-md space-y-4">
        <h3 class="text-lg font-semibold border-b pb-2 dark:border-gray-600">Primary Tags</h3>
        <div>
          <label class="block text-sm font-medium">Title ({{ title().length }} / 60)</label>
          <input type="text" name="title" required [(ngModel)]="title" #titleField="ngModel" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm dark:bg-gray-700 dark:border-gray-600 focus:border-orange-500 focus:ring-orange-500" [class.border-red-500]="titleField.invalid && titleField.touched">
          @if(titleField.invalid && titleField.touched) { <p class="mt-1 text-sm text-red-500">Title is required.</p> }
        </div>
        <div>
          <label class="block text-sm font-medium">Description ({{ description().length }} / 160)</label>
          <textarea [(ngModel)]="description" name="description" required #descField="ngModel" rows="3" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm dark:bg-gray-700 dark:border-gray-600 focus:border-orange-500 focus:ring-orange-500" [class.border-red-500]="descField.invalid && descField.touched"></textarea>
          @if(descField.invalid && descField.touched) { <p class="mt-1 text-sm text-red-500">Description is required.</p> }
        </div>
        <div>
          <label class="block text-sm font-medium">URL</label>
          <input type="url" name="url" required pattern="https?://.+" [(ngModel)]="url" #urlField="ngModel" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm dark:bg-gray-700 dark:border-gray-600 focus:border-orange-500 focus:ring-orange-500" [class.border-red-500]="urlField.invalid && urlField.touched">
          @if(urlField.errors?.['required'] && urlField.touched) { <p class="mt-1 text-sm text-red-500">URL is required.</p> }
          @if(urlField.errors?.['pattern'] && urlField.touched) { <p class="mt-1 text-sm text-red-500">A valid URL is required.</p> }
        </div>
        
        <h3 class="text-lg font-semibold border-b pb-2 pt-4 dark:border-gray-600">Advanced Tags</h3>
        <div>
          <label class="block text-sm font-medium">Canonical URL</label>
          <input type="url" name="canonicalUrl" required pattern="https?://.+" [(ngModel)]="canonicalUrl" #canonicalField="ngModel" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm dark:bg-gray-700 dark:border-gray-600 focus:border-orange-500 focus:ring-orange-500" [class.border-red-500]="canonicalField.invalid && canonicalField.touched">
          @if(canonicalField.errors?.['required'] && canonicalField.touched) { <p class="mt-1 text-sm text-red-500">Canonical URL is required.</p> }
          @if(canonicalField.errors?.['pattern'] && canonicalField.touched) { <p class="mt-1 text-sm text-red-500">A valid URL is required.</p> }
        </div>
        <div>
          <label class="block text-sm font-medium">Robots Meta Tag</label>
          <input type="text" name="robots" required [(ngModel)]="robotsContent" #robotsField="ngModel" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm dark:bg-gray-700 dark:border-gray-600 focus:border-orange-500 focus:ring-orange-500" [class.border-red-500]="robotsField.invalid && robotsField.touched">
           @if(robotsField.invalid && robotsField.touched) { <p class="mt-1 text-sm text-red-500">Robots content is required.</p> }
        </div>

        <h3 class="text-lg font-semibold border-b pb-2 pt-4 dark:border-gray-600">Social Tags (Open Graph & Twitter)</h3>
        <div>
          <label class="block text-sm font-medium">Image URL</label>
          <input type="url" name="ogImage" required pattern="https?://.+" [(ngModel)]="ogImage" #ogImageField="ngModel" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm dark:bg-gray-700 dark:border-gray-600 focus:border-orange-500 focus:ring-orange-500" [class.border-red-500]="ogImageField.invalid && ogImageField.touched">
          @if(ogImageField.errors?.['required'] && ogImageField.touched) { <p class="mt-1 text-sm text-red-500">Image URL is required for social tags.</p> }
          @if(ogImageField.errors?.['pattern'] && ogImageField.touched) { <p class="mt-1 text-sm text-red-500">A valid URL is required.</p> }
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div>
            <label class="block text-sm font-medium">OG Type</label>
            <input type="text" name="ogType" required [(ngModel)]="ogType" #ogTypeField="ngModel" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm dark:bg-gray-700 dark:border-gray-600 focus:border-orange-500 focus:ring-orange-500" [class.border-red-500]="ogTypeField.invalid && ogTypeField.touched">
             @if(ogTypeField.invalid && ogTypeField.touched) { <p class="mt-1 text-sm text-red-500">OG Type is required.</p> }
          </div>
          <div>
            <label class="block text-sm font-medium">Twitter Card Type</label>
            <input type="text" name="twitterCard" required [(ngModel)]="twitterCard" #twitterCardField="ngModel" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm dark:bg-gray-700 dark:border-gray-600 focus:border-orange-500 focus:ring-orange-500" [class.border-red-500]="twitterCardField.invalid && twitterCardField.touched">
            @if(twitterCardField.invalid && twitterCardField.touched) { <p class="mt-1 text-sm text-red-500">Twitter Card type is required.</p> }
          </div>
        </div>
        <div>
          <label class="block text-sm font-medium">Twitter Handle (e.g. @yourhandle)</label>
          <input type="text" name="twitterSite" [(ngModel)]="twitterSite" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm dark:bg-gray-700 dark:border-gray-600 focus:border-orange-500 focus:ring-orange-500">
        </div>
      </div>
      <!-- Previews -->
      <div class="space-y-6">
        <!-- Google Preview -->
        <div class="p-6 bg-white dark:bg-gray-800 rounded-lg shadow-md">
          <h3 class="text-lg font-semibold border-b pb-2 mb-4 dark:border-gray-600">Google Search Preview</h3>
          <div class="font-sans p-2 rounded-md border dark:border-gray-700">
            <p class="text-sm text-gray-700 dark:text-gray-300 truncate">{{ url() }}</p>
            <h4 class="text-xl text-blue-800 dark:text-blue-500 hover:underline cursor-pointer truncate">{{ title() }}</h4>
            <p class="text-gray-600 dark:text-gray-400">{{ description() }}</p>
          </div>
        </div>
        <!-- Social Previews -->
        <div class="p-6 bg-white dark:bg-gray-800 rounded-lg shadow-md">
          <h3 class="text-lg font-semibold border-b pb-2 mb-4 dark:border-gray-600">Social Media Previews</h3>
          <div class="space-y-6">
            <!-- Facebook Preview -->
            <div>
              <h4 class="font-semibold text-gray-700 dark:text-gray-300 mb-2 flex items-center gap-2">
                <svg class="h-5 w-5 text-[#1877F2]" fill="currentColor" viewBox="0 0 24 24"><path d="M22 12c0-5.52-4.48-10-10-10S2 6.48 2 12c0 4.84 3.44 8.87 8 9.8V15H8v-3h2V9.5C10 7.57 11.57 6 13.5 6H16v3h-2c-.55 0-1 .45-1 1v2h3v3h-3v6.95c5.05-.5 9-4.76 9-9.95z"/></svg>
                <span>Facebook Preview</span>
              </h4>
              <div class="max-w-md mx-auto border rounded-lg overflow-hidden dark:border-gray-700 bg-gray-50 dark:bg-gray-900/50">
                @if (ogImage()) {
                  <div class="w-full bg-gray-200 dark:bg-gray-700 aspect-[1.91/1]">
                    <img [src]="ogImage()" alt="Open Graph Image Preview" class="w-full h-full object-cover">
                  </div>
                }
                <div class="p-3">
                  <p class="text-xs text-gray-500 dark:text-gray-400 uppercase truncate">{{ getDomain(url()) }}</p>
                  <p class="font-bold text-gray-800 dark:text-gray-200 truncate mt-1">{{ title() }}</p>
                  <p class="text-sm text-gray-600 dark:text-gray-400 text-ellipsis overflow-hidden h-10">{{ description() }}</p>
                </div>
              </div>
            </div>

            <!-- Twitter Preview -->
            <div>
              <h4 class="font-semibold text-gray-700 dark:text-gray-300 mb-2 flex items-center gap-2">
                <svg class="h-5 w-5 text-[#1DA1F2]" fill="currentColor" viewBox="0 0 24 24"><path d="M22.46 6c-.77.35-1.6.58-2.46.67.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98-3.56-.18-6.73-1.89-8.84-4.48-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.22-1.95-.55v.05c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.52 8.52 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21c7.35 0 11.37-6.08 11.37-11.37 0-.17 0-.34-.01-.51.78-.57 1.45-1.28 1.98-2.08z"/></svg>
                <span>Twitter Preview</span>
              </h4>
              <div class="max-w-md mx-auto border rounded-lg overflow-hidden dark:border-gray-600">
                @if (ogImage()) {
                  <div class="w-full bg-gray-200 dark:bg-gray-700 aspect-video">
                     <img [src]="ogImage()" alt="Twitter Card Image Preview" class="w-full h-full object-cover">
                  </div>
                }
                <div class="p-3">
                  <p class="font-bold text-gray-800 dark:text-gray-200 truncate">{{ title() }}</p>
                  <p class="text-sm text-gray-600 dark:text-gray-400 text-ellipsis overflow-hidden h-10">{{ description() }}</p>
                  <p class="text-xs text-gray-500 dark:text-gray-400 mt-1 truncate flex items-center gap-1">
                    <span class="material-icons-outlined text-sm">link</span>
                    <span>{{ getDomain(url()) }}</span>
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Code Output Section -->
    <div class="p-6 bg-gray-900 text-white rounded-lg shadow-md flex flex-col">
      <div class="flex justify-between items-center mb-2">
        <h3 class="text-lg font-semibold">Generated HTML</h3>
        <div class="flex items-center space-x-2">
          <button (click)="copyShareUrl()" title="Copy a shareable link with the current configuration" class="py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 flex items-center gap-2 transition-colors">
            <span class="material-icons-outlined text-base">share</span>
            <span>{{ shareCopyText() }}</span>
          </button>
          <button (click)="copyToClipboard()" class="py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-orange-600 hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500">{{ copyButtonText() }}</button>
        </div>
      </div>
      <pre class="flex-grow bg-gray-800 p-4 rounded-md overflow-auto text-sm"><code>{{ generatedHtml() }}</code></pre>
    </div>

  </div>
</div>